{% extends "base.html" %}
{% load static %}
{% block head %}
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<script src="https://api.mapbox.com/mapbox-gl-js/v1.9.0/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v1.9.0/mapbox-gl.css" rel="stylesheet" />
<link rel="stylesheet" href="{% static "css/main_map.css" %}">
<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
{% endblock %}


{% block content %}

<nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow">
  <a class="navbar-brand col-md-5 col-lg-4" href="#">Comfort Maps</a>
<div class="btn-group btn-group-toggle" data-toggle="buttons">
  <label class="btn btn-secondary active">
    <input type="radio" name="options" id="option1" checked> See the Good
  </label>
  <label class="btn btn-secondary">
    <input type="radio" name="options" id="option2"> 
  </label>
  <label class="btn btn-secondary">
    <input type="radio" name="options" id="option3"> See the Bad
  </label>
</div>
</nav>

<!-- Begin page content -->
<div class="container-fluid p-0">
  <div class="row no-gutters">

    <div class="col-md-5 col-lg-4 d-none d-md-block bg-dark text-light sidebar position-relative" >
      <section class="sidebar-scroll-section" id="sidebar-section-1">
        <h1 class="display-4">Boston's Missing Bike Lanes</h1>
        <p class="lead">Boston is home to 670,000 people. The city has committed to increasing the share of commute trips by bike to <a href="https://www.cityofboston.gov/images_documents/Boston%20Bike%20Network%20Plan%2C%20Fall%202013_FINAL_tcm3-40525.pdf">10 percent by 2020</a>. Boston's Climate Action Plan also sets a goal of decreasing bike crashes by 50 percent.</p>

        <p>This is the visual story of what that plan looks like today and where changes need to be made.</p>
        <h6 class="author">Samuel Clay, October 1st, 2018</h6>
      </section>

      <section class="sidebar-scroll-section" id="sidebar-section-2">
        <h2 class="display-4">Bike Lanes of Today</h2>
        <p>In 2018 there are 195 miles of bike lanes across the city of Boston. The <a href="https://www.cityofboston.gov/images_documents/Boston%20Bike%20Network%20Plan%2C%20Fall%202013_FINAL_tcm3-40525.pdf">Boston Bike Network Plan</a> calls for adding 75 more miles between 2013 and 2019. And reaching 350+ total miles by 2043.</p>

        <p>Boston is attempting to create a world-class biking city, but to do that the city needs to do more than add bike lanes. Improving safety is what leads to increasing usage of the bike faciities in the city and to do that Boston needs to consider several problem areas.</p>
      </section>
      
      <section class="sidebar-scroll-section" id="sidebar-section-3">
        <h2>Complaints Tell a Story</h2>
        <p>Public records show a pattern behind complaints around inadequate bike facilities and bike lanes. This map shows the spots where citizens complained about the street being hazardous for bikes.</p>
      </section>
      
      <section class="sidebar-scroll-section" id="sidebar-section-4">
        <h2>Crashes Also Tell a Story</h2>
        <p>As part of the Vision Zero plan for Boston, every crash involving a bike that required a public safety response through 911 has been shown here.</p>
        <p>Most crashes in Boston are caused by drivers not seeing bikes, whether or not the bike was in a bike lane.</p>
      </section>
      
      <section class="sidebar-scroll-section" id="sidebar-section-5">
        <p>Zooming in highlights streets with numerous complaints lacking bike lanes.</p>
        <p class="note live-driving off">
          <span class="live-driving-icon"></span> 
          <span class="live-driving-text">Live driving is off</span>
        </p>
        <div class="zoom-streets">
          <div class="zoom-street zoom-street-1 active">
            <div class="zoom-street-number">1</div>
            <div class="zoom-street-name">Washington St. in Roslindale</div>
          </div>
          <div class="zoom-street zoom-street-2">
            <div class="zoom-street-number">2</div>
            <div class="zoom-street-name">Massachusetts Ave.</div>
          </div>
          <div class="zoom-street zoom-street-3">
            <div class="zoom-street-number">3</div>
            <div class="zoom-street-name">Huntington St.</div>
          </div>
          <div class="zoom-street zoom-street-4">
            <div class="zoom-street-number">4</div>
            <div class="zoom-street-name">Seaport Blvd.</div>
          </div>
          <div class="zoom-street zoom-street-5">
            <div class="zoom-street-number">5</div>
            <div class="zoom-street-name">Tremont St.</div>
          </div>
          <div class="zoom-street zoom-street-6">
            <div class="zoom-street-number">6</div>
            <div class="zoom-street-name">W Roxbury Pkwy.</div>
          </div>
          <div class="zoom-street zoom-street-7">
            <div class="zoom-street-number">7</div>
            <div class="zoom-street-name">Washington St. in Dorchester</div>
          </div>
          <div class="zoom-street zoom-street-8">
            <div class="zoom-street-number">8</div>
            <div class="zoom-street-name">Charles St.</div>
          </div>
        </div>
      </section>
      
    </div>
    
    <main role="main" class="container-fluid position-fixed h-100 p-0">
      <div id="CM-main-map" class="mapbox w-100 h-100 m-0 row"></div>
    </main>
    
    <figure class="figure snapshot-photo-container bg-dark col-4">
      <img src="..." class="figure-img img-fluid rounded" alt="...">
      <figcaption class="figure-caption text-right">A caption for the above image.</figcaption>
    </figure>
    
  </div>
</div>
{% endblock %}

{% block script %}
{% csrf_token %}
<script type="text/javascript">
  // using jQuery
  window.csrftoken = jQuery("[name=csrfmiddlewaretoken]").val();
  </script>

  <script src="{% static "js/main_map.js" %}"></script>
  <script>
    $(document).ready(() => {
      CM.initMap();
    });

    WebFont.load({
      google: {
        families: ['Lora', 'Montserrat']
      },
      fontactive: function(fontName) {
        console.log(['Fonts loaded', fontName]);
        if (!CM.fontsLoaded) CM.fontsLoaded = 0;
        CM.fontsLoaded += 1;
        if (fontName == "Lora" || CM.fontsLoaded >= 2) {
          CM.fontsReady && CM.fontsReady();
        }
      }
    });
    </script>
    {% endblock %}